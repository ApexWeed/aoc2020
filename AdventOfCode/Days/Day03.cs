using System;
using System.Linq;

namespace AdventOfCode.Days
{
    public class Day03 : IDay
    {
        public int Day => 3;
        public void RunPart1(bool silent)
        {
            Console.WriteLine(Part1());
        }

        public void RunPart2(bool silent)
        {
            Console.WriteLine(Part2());
        }

        public static int Part1()
        {
            var map = Input.Select(r => r.Select(c => c == '#').ToArray()).ToArray();

            return FindHits(map, 3, 1);
        }

        public static long Part2()
        {
            var map = Input.Select(r => r.Select(c => c == '#').ToArray()).ToArray();

            var hits = new[] {(1, 1), (3, 1), (5, 1), (7, 1), (1, 2)}.Select(pair =>
            {
                var (x, y) = pair;
                return FindHits(map, x, y);
            }).ToList();

            return hits.Aggregate(1L, (acc, i) => acc * i);

        }

        private static int FindHits(bool[][] map, int xSlope, int ySlope)
        {
            var hits = 0;
            var x = 0;
            var y = 0;
            do
            {
                if (map[y][x % map[y].Length])
                    hits++;

                x += xSlope;
                y += ySlope;
            } while (y < map.Length);

            return hits;
        }

        public static string[] Input =
        {
"....##..#........##...#.#..#.##",
".#.#..#....##....#...#..##.....",
"##.#..##..#...#..........##.#..",
".#.##.####..#......###.........",
"#.#.#...........#.....#...#....",
"#.......#....#.#.##..###..##..#",
".#...#...##....#.........#.....",
"..........##.#.#.....#....#.#..",
".......##..##...#.#.#...#......",
".#.#.#...#...##...#.##.##..#...",
"........##.#.#.###.........##..",
"#.#..#.#.#.....#...#...#......#",
".#.#.#...##......#...#.........",
".#..##.##.#...#...##....#.#....",
".##...#..#..#......##.###....##",
".....#...#.###.....#.#.........",
"#.##..#....#.#.#.#.............",
"........#...#......#...#..#....",
"##..##...##.##...#...#.###...##",
"#.#....##.#...###......#..#.#..",
"..#.....#.##......#..........#.",
"#.......#..#......#.....#....#.",
".....###...........#....#.##...",
"#.#........##.......#.#...#.##.",
".#.#.#........#........#.#.....",
"#..#..##.....#.###..#.#.#.##..#",
"..#.#...#..##.#.#.#.......###..",
"........#........#..#..#...#...",
"##............#...#..##.##...#.",
"#....#.#.....##...#............",
"............#...#..#.#.#....#..",
"#.#.#...##.##.#....#....#......",
"................###.....#.....#",
"##.#####.#..#...###..#...###...",
"...#.....#...#.#....#...#..#...",
".......#....##.##.#.##.........",
"..#..#..##.....#...#.#.....#...",
"...#...#.#.##.#..###.......#...",
"...#...........#.#####..##..#..",
"#.#...#........####..#......#.#",
"#..#.##...........#.#......#.##",
"#.#..#....##..#..##.#..........",
".....#..#.....#........##..#...",
"...###.......#.##.......#......",
"...##..#..#...#....#.###...#...",
"....####....#........#.##.#.#.#",
"#....#.....#.###.##...##..##.##",
".##.#...#.##.#......#..##.#....",
"...#.............#.............",
"..##..##.#.....#........##....#",
"#.....#....#.......####...#..#.",
"..#...#..#...#...##.#....##....",
".#...##....#....#..#....#......",
"##..#.#...##......#..#.......##",
"..#...#.##..#.....#.#...#..#.#.",
"#..##....#..........#..........",
".#........#..#......#......#.#.",
"...##.#.........#.#....#.#...#.",
"#.....#.#..#...#...#..#...#...#",
"#.........#.#.........##.......",
".#.......#......#.........###..",
".#..#..##...........#.....#..#.",
".#....................#.....#..",
".##.....#....#....#.###.....#..",
"...##.#.....#.#....#.........#.",
".........##.....#.....#.##..#..",
"......#......#.#..#..###...#..#",
"..##...#.#..#...#.#....#.......",
"..#..##.###.#..#..#..#......#..",
".....##...##.........#...##...#",
"###.#..##....##...##.#..###....",
"#...#.#..##......##...#.#..#...",
"..........#....###....#........",
"#.#.#.#.#.....#..##.##.....#...",
".##.....#...#.....#......#.....",
".#..........#.#.............#..",
".#..##..#.#..##...#....#.##...#",
"..#.#..........#...#..........#",
".#.......#.......#...#..#.....#",
"##.#...##...#......#.#..#......",
"#####..#....#..#...#...#.#.....",
"....#.......#.#..#.............",
"#..#..#.#.####...#....#....##..",
"#..#.##.#......#...#......#....",
"#...##.##...#....#..........##.",
"..#..#.......##.#....#...#.#...",
".....#.##..............##.....#",
"..##.##...##.....#.........#.#.",
".#....##...##...##..#....##..#.",
".#...#....#..#......#.#........",
"#....#.#.#..............#....##",
"..##..#..#....#####.#....#.#.##",
"#....#...#.##..#.##.........###",
"#..#..#....#...............#.#.",
"#....##...##........##.##.#.##.",
"......#......##....##.....#.###",
"#...##..#..#.....#.#........##.",
"..#.#.##...#...#....#..###...#.",
"#..##..#.###..##.#.#....#......",
"..###..#.##........###.....#...",
"#.............#.............#..",
".#.##....#..##.#...#....#.#####",
"###.....###.#......##..#..##...",
".#.#......##.#....#....#.#..#..",
"###..#..#....#......###.##.....",
"......#.......#......#..##..##.",
"..#..#...#..#....#.##....#.#..#",
".......##..#........#.#.##.....",
".#...#..#........#..#.#..#..#.#",
".#..#.##.......#......#...#.#..",
".##..##......##.#...#......####",
".....#....#......#.....#......#",
"..........#.#.#...##.#..#.#....",
"...#.......##......#..#.#.##...",
".###..#.#.#....................",
"##...#...#.##............#.....",
"....#....#.##...#..#.#...##....",
"..#.#....#.###...#...#.#.####.#",
"..#..#.#...#.#......##.........",
"#..#..####.##.#.#..###....#...#",
"....#..........#.##.#..#.#.#.#.",
"#.#.##.........#.....##...#..##",
"#......#...#.##.#......#..#.#..",
"#...#........#..#..#...##...#..",
".....#.####..##..#.#.##..#...#.",
"#..#........#........#...#....#",
"...........#..#.....#.#.#.#....",
"....#......#....#...#....##....",
".#.#..#...#.#....#..#.#....##.#",
"....#...#...#.##..#...#..##...#",
"#######...............##.....##",
".#.#..............#....#..#.###",
"#......#.#......###....###.....",
"##..#...#.##..##..##.#....#....",
"#....##..#..#...#.#.#...#......",
"..........#..#.##..##.##.#..##.",
"....#.#.#.....##........#..#...",
"..###...#.....##.##.....##..##.",
"....#.#..#.#.......#.......#...",
"..##.#..#.....##...###...#...#.",
"..#.........#...##...#...#..#..",
"..#..#..#..#..##.#...##..#.#...",
"...##..#..##..#..####...#.....#",
"............#............###...",
".#.#.###.#.....#.#.#..#.###..#.",
"...#.........#.....####........",
"....##.#..##.#.............#...",
"....#.##.....#..#.....#......##",
"..........#.............#...##.",
"#..#.....#.......##..###.......",
"..##.#...........#.......#..#..",
"...#...#.#.##.###....#.#..#....",
"...#..........##..#..#..#...###",
".........#.....#..##.....#..#..",
"#........#...#...#..#.#....##..",
".#.#.....####..#.##.#..........",
"###.......##..#.##...#.....#...",
"..###.##.#..#..#..#.....##...#.",
".........#.....##.#..#..##.....",
"#..#..##...###..............#..",
"#....#.#....#..#.....#..####...",
"####..#.....##...#..#.#.#.#...#",
"...#....#.....#.##.#.#.#....##.",
"..........#...#.....###....#.##",
"#....#.#.#....#..#..#.....#....",
".....#.#...#......#....#......#",
".####....##...#...#......##..#.",
".#...#..#....#..#..............",
"##.#...##...#.##..#......#.....",
"..####.##..#....#.#......#.#.##",
"........#.....##...#.#..##....#",
"....#.#.#.#.###...#.#...##...##",
"#.....#...####.#....#.#........",
"..#.....#...##.........###.....",
"....#....#....#..#......#####.#",
"###.....#..#.#.#......#.##.#...",
"....#.##......#..#.#...........",
".#....#....#.#..#.......#...##.",
"...................#.#.#..#....",
"##...#.....#........#....#...#.",
"........##......#...##.#..#.#.#",
"#.#..###...#....#.#...#.......#",
"#..........##......#..#..#.....",
".............#...##.#...#......",
"#..#....##..#.........#..#.###.",
".....#..........#....##.#...##.",
"###....................#.#.##..",
"#........##...##......#....###.",
"#....#.............#....#...#..",
"##.......##.#.......#....#..#..",
"##...#............#..#.#....##.",
"..#.#..#...#####..........#....",
"..#.........##.....#.#...####..",
"....#..............#...........",
"..#...#.#.#..#.......##.#.#.#..",
"....#.##.....##..#.....#..####.",
"#...#...#...#.......#.........#",
"......#..#.####...###.#.#.....#",
".......#..#..#.....#.#..##.#..#",
".#......##..#............#.....",
".#........#.#....#....#........",
".....#.#..#.##.#..##....#..#...",
"#.#...........#....##.....#....",
"..#..#..##.###..##..#..###.#.##",
"##.#..#...##.#.........#...#.#.",
"......#..#..##...#....#...#.##.",
"#.##.......................#...",
".......#..#..#.##..##......#...",
"..#.#...#.....#..###....#...#..",
"##..#.....#..#..#.##.....#...##",
"#...##...###...#.#..###....#...",
"...#.#.#..####.....#...##....#.",
".#.#..##.....#..#.....##..##..#",
"#...#..........#.##.#.#........",
"..##....#.##....#..##......#...",
"....#..........###.....####..##",
"...........###....##.#.#.#.#...",
"...#......................####.",
"#.#.#...#.#.#.#.#......#.....##",
"..###...#.####...#..##..#....#.",
"....#....#.......#...#.........",
".#.###.............##..#...#...",
"....#.#....##...#.....#.##.....",
"#.......##.....#.#.....#....##.",
"....##.....###..#.#..#....#...#",
"......#..##...#......#.....#.##",
".#.....#.##.###....#.....#..###",
"...#..#.###.#....#..#..#...##.#",
"...##..#...#..#.#.#..#...#.....",
"##.####...##..#.#.#....#.......",
"..##..#.#.......##.#......##.#.",
"....##....#....#..#....#..##.#.",
"..##..........##....#...#.#..#.",
"#.#...#.#.###.#.#..##.#...#....",
".....#..#.............#...#...#",
"....#.#..#...##...#....#.##....",
"#..#...#.###.....#...#.....#.#.",
"#####....#....#....#.......#.##",
"#...##....##.#.#...#.....##.#..",
"#.......#...#..#..#...#....#...",
"....#......#.#..........#....##",
"#.###...#.#..##..#.##........#.",
"#..#.....##.......#..#..#.#....",
"...#...#.##...#....#.#.#.#...#.",
"...##..#.#....#......###......#",
"#.#....#...#..#..#....#........",
"..#..#.#...##..........#.###...",
"#..........#...#..#....#....###",
"..#..#.#....#..............#...",
"...#........#...#.#....###.#..#",
"....#.#.#................#..#.#",
"..#........##.#....#.#..#......",
"...##..#..#.......#..#......#.#",
"..#..#....#.........#....#.##..",
"#.....#....###.#..#..#...#...#.",
"..#..##.###.#..##....#.###.....",
"...#...####..#........###.#....",
".........#.#...#..#..#.#.......",
".##.........##.#..............#",
"..#.#.#.....###........#.#.#..#",
"....##..#....#....#.#..#.......",
"#.#.....#...#........##........",
".##.#.#..#..#.#.#.........#....",
"#.....#..#.##...#...#..........",
"##..#....#....##.#..#.........#",
"................#.##.#......#.#",
"..#..#.#........##...###..#...#",
"##........#.......#...##.##..#.",
"##....#.....#..##....#.......#.",
"#.#....#.#........#..#.........",
"......##......#...#.....#.##...",
"###....#..........##.#.#......#",
"......#...###.........###..#...",
".####....#...##..#.#.....#...#.",
".##...#...###....#...#.#..###..",
"#..#......##...#.###..###...#..",
"#....#.#.#..#....##...#.##..#..",
"..#.....#...#..........#.##.###",
"#.....#....###.......##..##.#..",
"#..##...#..#....#.###......#...",
"#..#........##..#.....#.#.#....",
"#.##.#.#..#....#.#.............",
".#...............#....##.......",
".#.##......##........#...#..#.#",
".#...#....#....#...#..#...##...",
".....#..###...##........#.#....",
"...#.......#....##..#..#....#..",
"...###....#........#..#.###.#..",
"......##..##..............###.#",
".......#.####..##....#.#....#..",
"#...#......#...#..#.....##....#",
".#..#..###....#..##.##.#.......",
"#......##......#..##....#..##..",
".....#..#.#......##.##..##.....",
"...#..#.......#......#.........",
"....#..####......#..#....#...#.",
"..#.#..#...#....#....#.......#.",
"####..#........#.###...##.#.#.#",
".......##........#.#.#...##....",
"...#.........#..#.#..##....#...",
".....#..#...#.#....#...#.#.##.#",
"#..##.....#.....##.......#...#.",
".......##.#.#.....#....#......#",
"...#...#.##...#......#....#....",
"..#..#.#...#..#.....#...###.#..",
".........#...#..#.......##.....",
"..##...................#..#.###",
".##.##..#.#...#.#....#.....##..",
"#.#...##...#...#...##..#......#",
"....#..#...#.....##.#.....#..##",
"##.#..........###..#...#..#....",
"...##....#.##....#......#......",
".....#.........#....#.#.......#",
".......#............#.#.....#..",
"..#..#...#..#####..#....##.....",
"...##......##...#.#........##..",
".....#..###...##.#.#.##.#...#..",
"..#.#.#..##..#.##...##.#.#.....",
"......##...#..##......#.#......",
"......................#........",
"#...#..#....#..#.#.##.#.....#.#",
".#......#.#....#.#.#..#....#...",
".#..#.#.#..#....#..............",
        };
    }
}
